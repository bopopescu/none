1)
--------------------------------------------------------------------------------------------------------------
SQL> SELECT DF.TOTAL/1073741824 "DataFile Size GB", LOG.TOTAL/1073741824 "Redo Log Size GB", CONTROL.TOTAL/1073741824 "Control File Size GB", (DF.TOTAL + LOG.TOTAL + CONTROL.TOTAL)/ 1073741824 "Total Size GB" from dual, (select sum(a.bytes) TOTAL from dba_data_files a) DF, (select sum(b.bytes) TOTAL from v$log b) LOG, (select sum((cffsz+1)*cfbsz) TOTAL from x$kcccf c) CONTROL;

DataFile Size GB Redo Log Size GB Control File Size GB Total Size GB
---------------- ---------------- -------------------- -------------
      2632.06537       4.00390625           .111785889    2636.18106



2) For RAC node1:
--------------------------------------------------------------------------------------------------------------
$ORACLE_HOME/dbs/initracdb.ora
initracdb.ora
##############################################################
# FILE : initracdb.ora
# DATABASE NAME : racdb
##############################################################

3) for RAC node2:
--------------------------------------------------------------------------------------------------------------
# listener.ora Network Configuration File: /u01/app/oracle/product/11.2.0.4/db_1/network/admin/listener.ora
# Generated by Oracle configuration tools.

LISTENER =
(DESCRIPTION_LIST =
      (DESCRIPTION =
            (ADDRESS = (PROTOCOL = TCP)(HOST = rac2)(PORT = 1522))
                  (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1522))
                      )
)

ADR_BASE_LISTENER = /u01/app/oracle

# tnsnames.ora Network Configuration File: /u01/app/oracle/product/11.2.0.4/db_1/network/admin/tnsnames.ora
# Generated by Oracle configuration tools.

RACDB =
  (DESCRIPTION =
      (ADDRESS_LIST =
            (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.200.12)(PORT = 1522))
                )
          (CONNECT_DATA =
                (SERVICE_NAME = racdb)
                        (UR = A)
                            )
            )

  MFSDB =
    (DESCRIPTION =
        (ADDRESS_LIST =
              (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.200.12)(PORT = 1522))
                  )
            (CONNECT_DATA =
                  (SERVICE_NAME = mfsdb)
                          (UR = A)
                              )
              )

    PRIMFSDB=
      (DESCRIPTION =
          (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.200.223)(PORT = 1521))
              (CONNECT_DATA =
                    (SERVICE_NAME = mfsdb )
                        )
                )


4) For single DB(Non-RAC node):
--------------------------------------------------------------------------------------------------------------
# Add TNS entry in $ORACLE_HOME/network/admin/tnsnames.ora
NEWRACDB =
    (DESCRIPTION =
       (ADDRESS = (PROTOCOL = TCP)(HOST = rac1)(PORT = 1522))
    (CONNECT_DATA =
    (SERVER = DEDICATED)
    (SERVICE_NAME = RACDB)
    )
)

NEWMFSDB=
    (DESCRIPTION =
       (ADDRESS = (PROTOCOL = TCP)(HOST = rac1)(PORT = 1522))
    (CONNECT_DATA =
    (SERVER = DEDICATED)
    (SERVICE_NAME = MFSDB)
    )
)

5)  Start the auxiliary database in NOMOUNT mode on RAC node1:
--------------------------------------------------------------------------------------------------------------
 export ORACLE_SID=RACDB
 export ORACLE_HOME=/u01/app/oracle/product/v110204

sqlplus / as sysdba

#Start the database in nomount and test the connectivity 
STARTUP NOMOUNT;

# then Test your Sql*Net connections from Non-RAC Server and you must be able to connect to the RACDB database on RAC Node1.
[oracle@Non-RAC]$ sqlplus sys/xxxxxxx@RACDB as sysdba

#Here we are using RMAN catalog and testing the connection to RMAN Database too.
[oracle@Non-RAC]$ sqlplus  rman /xxxxxxx@rmancat
[oracle@Non-RAC]sqlplus / as sysdba
SQL> create user rman identified by rman;
SQL> alter user rman default tablespace tools temporary tablespace temp;
SQL> alter user rman quota unlimited on tools;
SQL> grant connect, resource, recovery_catalog_owner to rman;
SQL> exit;

#Next, log in to rman and create the catalog schema. Prior to Oracle 8i this was done by running the catrman.sql script.

rman catalog rman/rman
RMAN> create catalog tablespace tools;
RMAN> exit;

You can now continue by registering your databases in the catalog. Look at this example:

rman catalog rman/rman target backdba/backdba
RMAN> register database;



6) Duplicate the database to RAC server 
--------------------------------------------------------------------------------------------------------------
https://community.oracle.com/thread/2238748
http://www.pythian.com/blog/duplicate-from-active-database-using-rman-step-by-step/
# For MFSDB
[oracle@rac2]$ 
rman target sys/dewcwtso85@primfsdb auxiliary /
run{
  set newname for datafile 4 to '+DATA';
  set newname for datafile 3 to '+DATA';
  set newname for datafile 2 to '+DATA';
  set newname for datafile 1 to '+DATA';
  set newname for datafile 5 to '+DATA';
  set newname for datafile 6 to '+DATA';
  set newname for tempfile  1 to '+DATA';
  set newname for tempfile  2 to '+DATA';
  duplicate target database to MFSDB 
  logfile
  group 1 ('+DATA') SIZE 50M reuse,
  group 2 ('+DATA') SIZE 50M reuse;
}
exit;




# For RACDB
# rman auxiliary sys/pwd@racdb target sys/Wzhyj123@priracdb catalog rman/rman@PRIMFSDB
[oracle@Non-RAC]$   cat dup_RACDB.rmn
connect catalog rman/xxxxxxxx@rmancat
connect target sys/XXX@PRIRACDB
connect auxiliary sys/xxxxxxx@RACDB

run{
allocate channel d1 device type disk;
allocate channel d2 device type disk;
allocate auxiliary channel a1 device type disk;
allocate auxiliary channel a2 device type disk;
set newname for datafile 4 to '+DATA';
set newname for datafile 3 to '+DATA';
set newname for datafile 2 to '+DATA';
set newname for datafile 1 to '+DATA';
set newname for datafile 6 to '+DATA';
set newname for datafile 7 to '+DATA';
set newname for datafile 8 to '+DATA';
set newname for datafile 9 to '+DATA';
set newname for datafile 10 to '+DATA';
set newname for datafile 11 to '+DATA';
set newname for datafile 12 to '+DATA';
set newname for datafile 13 to '+DATA';
set newname for datafile 14 to '+DATA';
set newname for datafile 15 to '+DATA';
set newname for datafile 16 to '+DATA';
set newname for datafile 17 to '+DATA';
set newname for datafile 18 to '+DATA';
set newname for datafile 19 to '+DATA';
set newname for datafile 20 to '+DATA';
set newname for datafile 21 to '+DATA';
set newname for datafile 22 to '+DATA';
set newname for datafile 23 to '+DATA';
set newname for datafile 24 to '+DATA';
set newname for datafile 25 to '+DATA';
set newname for datafile 26 to '+DATA';
set newname for datafile 27 to '+DATA';
set newname for datafile 28 to '+DATA';
set newname for datafile 29 to '+DATA';
set newname for datafile 30 to '+DATA';
set newname for datafile 31 to '+DATA';
set newname for datafile 32 to '+DATA';
set newname for datafile 33 to '+DATA';
set newname for datafile 34 to '+DATA';
set newname for datafile 35 to '+DATA';
set newname for datafile 36 to '+DATA';
set newname for datafile 37 to '+DATA';
set newname for datafile 38 to '+DATA';
set newname for datafile 39 to '+DATA';
set newname for datafile 40 to '+DATA';
set newname for datafile 41 to '+DATA';
set newname for datafile 42 to '+DATA';
set newname for datafile 43 to '+DATA';
set newname for datafile 44 to '+DATA';
set newname for datafile 45 to '+DATA';
set newname for datafile 46 to '+DATA';
set newname for datafile 47 to '+DATA';
set newname for datafile 48 to '+DATA';
set newname for datafile 49 to '+DATA';
set newname for datafile 50 to '+DATA';
set newname for datafile 51 to '+DATA';
set newname for datafile 52 to '+DATA';
set newname for datafile 53 to '+DATA';
set newname for datafile 54 to '+DATA';
set newname for datafile 55 to '+DATA';
set newname for datafile 56 to '+DATA';
set newname for datafile 57 to '+DATA';
set newname for datafile 58 to '+DATA';
set newname for datafile 59 to '+DATA';
set newname for datafile 60 to '+DATA';
set newname for datafile 61 to '+DATA';
set newname for datafile 62 to '+DATA';
set newname for datafile 63 to '+DATA';
set newname for datafile 64 to '+DATA';
set newname for datafile 65 to '+DATA';
set newname for datafile 66 to '+DATA';
set newname for datafile 67 to '+DATA';
set newname for datafile 68 to '+DATA';
set newname for datafile 69 to '+DATA';
set newname for datafile 70 to '+DATA';
set newname for datafile 71 to '+DATA';
set newname for datafile 72 to '+DATA';
set newname for datafile 73 to '+DATA';
set newname for datafile 74 to '+DATA';
set newname for datafile 75 to '+DATA';
set newname for datafile 76 to '+DATA';
set newname for datafile 77 to '+DATA';
set newname for datafile 78 to '+DATA';
set newname for datafile 79 to '+DATA';
set newname for datafile 80 to '+DATA';
set newname for datafile 81 to '+DATA';
set newname for datafile 82 to '+DATA';
set newname for datafile 83 to '+DATA';
set newname for datafile 84 to '+DATA';
set newname for datafile 85 to '+DATA';
set newname for datafile 86 to '+DATA';
set newname for datafile 87 to '+DATA';
set newname for datafile 88 to '+DATA';
set newname for datafile 89 to '+DATA';
set newname for datafile 90 to '+DATA';
set newname for datafile 91 to '+DATA';
set newname for datafile 92 to '+DATA';
set newname for datafile 93 to '+DATA';
set newname for datafile 94 to '+DATA';
duplicate target database to RACDB
#pfile=/home/oracle/product/v10204/dbs/initRACDB.ora
logfile
group 1 ('+DATA') SIZE 50M reuse,
group 2 ('+DATA') SIZE 50M reuse;
release channel d1;
release channel d2;
}
exit;

[oracle@Non-RAC]$ $ORACLE_HOME/bin/rman cmdfile dup_RACDB.rmn | tee dup_RACDB.rmn


7) At rac2
sqlplus / as sysdba
alter database add logfile thread 2 group 3 '+DATA' size 500m reuse;
alter database add logfile thread 2 group 4 '+DATA' size 500m reuse;
alter database enable public thread 2;

create undo tablespace UNDOTBS2 datafile '+DATA' size 500M;


8)
yvrk1973.blogspot.com/2013/05/how-to-convert-single-instance-database.html
[oracle@rac2 sampleXMLs]$  /u01/app/oracle/product/11.2.0.4/db_1/bin/rconfig ConvertToRAC_AdminManaged.xml




PROBLEMS:
1, 
Oracle instance shut down
RMAN-00571: ===========================================================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============
RMAN-00571: ===========================================================
RMAN-03002: failure of Duplicate Db command at 04/01/2015 09:41:44
RMAN-05501: aborting duplication of target database
RMAN-03015: error occurred in stored script Memory Script
RMAN-06026: some targets not found - aborting restore
RMAN-06024: no backup or copy of the control file found to restore
==>重新备份数据库
http://databaseninja.blogspot.com/2011/12/rman-06026-some-targets-not-found-rman.html
http://docs.oracle.com/cd/E11882_01/backup.112/e10642/rcmdupdb.htm#BRADV89938
http://www.pythian.com/blog/duplicate-from-active-database-using-rman-step-by-step/
